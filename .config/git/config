# TIP: `update-index --test-untracked-cache`
# if OK, then
# `config set --global core.untrackedCache true`

# TIP: `config set feature.manyFiles true` where appropriate

[core]
	abbrev = 4

[credential "https://github.com"]
	helper =
	helper = !gh auth git-credential
[credential "https://gist.github.com"]
	helper =
	helper = !gh auth git-credential
[user]
	name = Rudxain
	email = 76864299+Rudxain@users.noreply.github.com
	# NOTE: `config set commit.gpgSign true`
	# in repos that I don't own
	signingKey = 0DAC837DDEF8E96C

[help]
	autoCorrect = prompt

[alias]
	aliases = "!a() { git config get --all --show-names --regexp '^alias\\.' | cut -c7-; }; a"
	is-shallow = rev-parse --is-shallow-repository
	# https://git-scm.com/docs/partial-clone
	# https://github.blog/open-source/git/get-up-to-speed-with-partial-clone-and-shallow-clone
	# TIP: if `rb` slow, `--reapply-cherry-picks`
	clon-lazy = clone --filter=blob:none
	# TIP: `config set merge.stat false`
	clon-sparse = clone --filter=blob:none --sparse
	# name inspired by Rust ü¶Ä
	# ‚ö†Ô∏è WARN: do not amend grafted commits!
	# https://github.com/jesseduffield/lazygit/issues/4907
	copy = clone --depth=1 --filter=blob:none # shallow blobless fetch
	copy-sparse = clone --depth=1 --filter=blob:none --sparse
	co = checkout
	bc = switch -c
	cb = switch # change branch
	a = add
	nuke = rm -rf --sparse --
	unstage = restore -S
	# `mixed` (default) because typical usage should be commit-split,
	# IDC if default ever becomes `soft`.
	uncommit = reset HEAD~
	c = commit
	cs = commit -S
	ca = commit -av
	cas = commit -avS
	l = log --oneline
	lg = log --oneline --graph
	ll = log --name-only
	ls = log --stat
	lp = log -p --color-words
	o = show --name-only
	os = show --stat
	oo = show --color-words
	d = diff --name-only
	ds = diff --stat
	dd = diff --color-words
	dn = diff --no-index --color-words
	# try to resolve merge conflicts (if any) in unmerged ("both modified" status) files;
	# works with any WD inside work-tree;
	# it intentionally ignores files outside WD, to avoid overload
	resolve = "!git diff --name-only --diff-filter=U --relative -z | xargs -0r $(git var GIT_EDITOR)"
	s = status -s
	ss = status
	statuses = branch -vv
	b = branch
	ba = branch -a
	remotes = remote -v
	contributors = shortlog -sn
	# "garbage collection"
	bdm = "!f() { git branch --merged | grep -vF '*' | xargs -r git branch -d; }; f"
	ccp = cherry-pick # commit copy
	# TIP: `--update-refs`
	# https://andrewlock.net/working-with-stacked-branches-in-git-is-easier-with-update-refs
	rb = rebase
	rbi = rebase -i
	rbn = "!r() { git rebase -i "HEAD~$1"; }; r"
	rbr = "!r() { git -c commit.verbose=true rebase -i --root; }; r"
	push-force = push --force-with-lease
	f = fetch

[init]
	# solves racism across the entirety of space-time (/s):
	# https://sfconservancy.org/news/2020/jun/23/gitbranchname
	defaultBranch = main

[remote "origin"]
	# see `fetch`
	prune = true

[url "https://github.com/"]
	insteadOf = "gh:"

[add]
	ignoreErrors = true

[status]
	showStash = true

[diff]
	renames = copies
	wordRegex = "[[:alnum:]]{1,16}|[^[:space:]]"

[log]
	date = iso

[merge]
	# summarize commits
	log = true
	conflictStyle = zdiff3

[rebase]
	missingCommitsCheck = error
	# for `fixup`s
	autoSquash = true
